@{
    var contexto = ViewData["Contexto"]?.ToString() ?? "Juegos";
    var gameId = contexto == "Juegos" ? "sequence-game" : "sequence-game-cec";
    var esJuegos = contexto == "Juegos";
}
<div id="@gameId" class="game-wrapper">
    <div id="start-screen" class="start-screen">
        <h2>Presiona cualquier tecla para comenzar</h2>
    </div>

    <div id="countdown" class="countdown">3</div>

    <div class="container hidden" id="game-container">
        <div id="grid" class="grid-container"></div>

        <div id="result-screen" class="hidden">
            <h2>¡Finalizado!</h2>
            <p>Secuencias correctas: <span id="score"></span></p>

            @if (esJuegos)
            {
                <div id="result-stats" class="stats-container"></div>
                <div style="max-width:800px; margin:40px auto;">
                    <h3 style="text-align:center;">Gráfico: Tiempo por ronda</h3>
                    <canvas id="timeChart" height="200"></canvas>
                </div>
                <div style="max-width:500px; margin:40px auto;">
                    <h3 style="text-align:center;">Distribución de aciertos</h3>
                    <canvas id="accuracyChart" height="200"></canvas>
                </div>
            }
            else
            {
                <div style="text-align:center;">
                    <button id="next-game-btn" class="next-button" onclick="location.href='/CalcBrainAge/EncuentraPatron'">Siguiente juego</button>
                </div>
            }
        </div>

    </div>

    <audio id="sound-correct" src="/sounds/correct.mp3" preload="auto"></audio>
    <audio id="sound-error" src="/sounds/error.mp3" preload="auto"></audio>
    <audio id="sound-end" src="/sounds/end.mp3" preload="auto"></audio>
</div>

@if (!esJuegos)
{
    <style>
        .next-button {
            font-size: 2rem;
            padding: 1rem 2rem;
            margin-top: 3rem;
            background-color: #4caf50;
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
        }

            .next-button:hover {
                background-color: #388e3c;
            }
    </style>
}
